// ChunkMaster Database - Essential English expressions and chunks
// Organized by categories and difficulty levels for natural conversation flow

export const chunkCategories = {
  agreement: {
    name: 'Agreement & Confirmation',
    icon: '✅',
    chunks: {
      foundation: [
        {
          expression: "I guess so",
          meaning: "I suppose that's true, but I'm not entirely certain",
          example: "A: Do you think it will rain today? B: I guess so, the clouds look pretty dark.",
          alternatives: ["I suppose so", "I think so", "Probably"]
        },
        {
          expression: "You're right",
          meaning: "I agree with what you said",
          example: "A: This restaurant is expensive. B: You're right, let's find somewhere cheaper.",
          alternatives: ["That's true", "Exactly", "I agree"]
        },
        {
          expression: "That makes sense",
          meaning: "What you said is logical and understandable",
          example: "A: I'm tired because I worked late. B: That makes sense.",
          alternatives: ["I see", "I understand", "That's logical"]
        },
        {
          expression: "Fair enough",
          meaning: "I accept your point or reasoning",
          example: "A: I can't come tonight, I have to study. B: Fair enough.",
          alternatives: ["That's fair", "I understand", "Okay"]
        },
        {
          expression: "Absolutely",
          meaning: "I completely agree",
          example: "A: This movie is amazing! B: Absolutely, it's the best I've seen.",
          alternatives: ["Definitely", "For sure", "Totally"]
        }
      ],
      building: [
        {
          expression: "I couldn't agree more",
          meaning: "I completely and strongly agree",
          example: "A: Education should be free for everyone. B: I couldn't agree more.",
          alternatives: ["Exactly my thoughts", "My thoughts exactly", "I totally agree"]
        },
        {
          expression: "You have a point",
          meaning: "What you said is valid and worth considering",
          example: "A: Maybe we should leave earlier to avoid traffic. B: You have a point.",
          alternatives: ["That's a good point", "You're onto something", "Valid point"]
        },
        {
          expression: "I'm inclined to agree",
          meaning: "I tend to agree, though with some reservation",
          example: "A: I think remote work is more productive. B: I'm inclined to agree, based on my experience.",
          alternatives: ["I tend to agree", "I'm leaning towards agreeing", "I mostly agree"]
        },
        {
          expression: "That's exactly what I was thinking",
          meaning: "You expressed my exact thoughts",
          example: "A: We should postpone the meeting. B: That's exactly what I was thinking!",
          alternatives: ["My thoughts exactly", "You read my mind", "I was thinking the same thing"]
        },
        {
          expression: "I'm with you on that",
          meaning: "I agree with your opinion or decision",
          example: "A: I think we should invest in better equipment. B: I'm with you on that.",
          alternatives: ["I'm on board", "Count me in", "I support that"]
        }
      ],
      mastery: [
        {
          expression: "I concur wholeheartedly",
          meaning: "I agree completely and enthusiastically",
          example: "A: This proposal addresses all our concerns. B: I concur wholeheartedly.",
          alternatives: ["I'm in complete agreement", "I fully endorse that", "Unequivocally yes"]
        },
        {
          expression: "That resonates with me",
          meaning: "I connect with and agree with that idea deeply",
          example: "A: Success isn't just about money, it's about fulfillment. B: That really resonates with me.",
          alternatives: ["That strikes a chord", "I connect with that", "That speaks to me"]
        },
        {
          expression: "You've articulated my sentiments perfectly",
          meaning: "You've expressed exactly how I feel",
          example: "A: The balance between work and life is crucial for happiness. B: You've articulated my sentiments perfectly.",
          alternatives: ["You've captured my thoughts exactly", "You've voiced my feelings precisely", "That's precisely how I feel"]
        }
      ]
    }
  },

  opinion: {
    name: 'Opinion & Uncertainty',
    icon: '🤔',
    chunks: {
      foundation: [
        {
          expression: "I think",
          meaning: "In my opinion or belief",
          example: "I think this is the best solution for our problem.",
          alternatives: ["I believe", "In my opinion", "I feel"]
        },
        {
          expression: "As far as I know",
          meaning: "Based on my knowledge or information",
          example: "As far as I know, the meeting is at 3 PM tomorrow.",
          alternatives: ["To my knowledge", "From what I understand", "As I understand it"]
        },
        {
          expression: "I'm not sure",
          meaning: "I don't have certainty about something",
          example: "I'm not sure if that's the right answer.",
          alternatives: ["I'm uncertain", "I don't know", "I'm unsure"]
        },
        {
          expression: "In my opinion",
          meaning: "According to my personal view",
          example: "In my opinion, this is the best restaurant in town.",
          alternatives: ["I think", "I believe", "From my perspective"]
        },
        {
          expression: "Maybe",
          meaning: "Possibly, but not certain",
          example: "Maybe we should try a different approach.",
          alternatives: ["Perhaps", "Possibly", "It's possible"]
        }
      ],
      building: [
        {
          expression: "From my perspective",
          meaning: "According to my viewpoint or experience",
          example: "From my perspective, remote work has improved our productivity.",
          alternatives: ["In my view", "From where I stand", "From my standpoint"]
        },
        {
          expression: "I'm of the view that",
          meaning: "I hold the opinion that",
          example: "I'm of the view that education should be more practical.",
          alternatives: ["I'm of the opinion that", "I hold the view that", "My view is that"]
        },
        {
          expression: "It seems to me that",
          meaning: "I have the impression that",
          example: "It seems to me that people are more stressed these days.",
          alternatives: ["It appears to me that", "I get the impression that", "It strikes me that"]
        },
        {
          expression: "I'm inclined to think",
          meaning: "I tend to believe or lean towards thinking",
          example: "I'm inclined to think that the project will succeed.",
          alternatives: ["I tend to think", "I'm leaning towards thinking", "I'm disposed to think"]
        },
        {
          expression: "If you ask me",
          meaning: "In my personal opinion (often used for emphasis)",
          example: "If you ask me, this policy won't work.",
          alternatives: ["In my view", "Personally", "From where I sit"]
        }
      ],
      mastery: [
        {
          expression: "I'm of the firm conviction that",
          meaning: "I strongly believe that",
          example: "I'm of the firm conviction that transparency builds trust.",
          alternatives: ["I'm firmly convinced that", "I hold the strong belief that", "I'm absolutely convinced that"]
        },
        {
          expression: "It's my considered opinion that",
          meaning: "After careful thought, I believe that",
          example: "It's my considered opinion that we need to restructure the department.",
          alternatives: ["After careful consideration, I believe", "Having thought it through, I think", "Upon reflection, I'm of the opinion"]
        },
        {
          expression: "I'm somewhat ambivalent about",
          meaning: "I have mixed feelings or conflicting opinions about",
          example: "I'm somewhat ambivalent about the new policy changes.",
          alternatives: ["I have mixed feelings about", "I'm torn about", "I'm conflicted about"]
        }
      ]
    }
  },

  transition: {
    name: 'Transitions & Connectors',
    icon: '🔄',
    chunks: {
      foundation: [
        {
          expression: "On the other hand",
          meaning: "Considering the opposite viewpoint",
          example: "The weather is nice. On the other hand, it might rain later.",
          alternatives: ["However", "But then again", "Conversely"]
        },
        {
          expression: "By the way",
          meaning: "Introducing a new topic or additional information",
          example: "The meeting went well. By the way, did you get my email?",
          alternatives: ["Incidentally", "Speaking of which", "Oh, and"]
        },
        {
          expression: "In other words",
          meaning: "To explain something differently or more simply",
          example: "The project is behind schedule. In other words, we need more time.",
          alternatives: ["That is to say", "To put it differently", "Simply put"]
        },
        {
          expression: "For example",
          meaning: "To give an instance or illustration",
          example: "Many cities have traffic problems. London, for example, is very congested.",
          alternatives: ["For instance", "Such as", "Like"]
        },
        {
          expression: "Speaking of",
          meaning: "Transitioning to a related topic",
          example: "This cake is delicious. Speaking of desserts, have you tried their ice cream?",
          alternatives: ["Talking about", "On the subject of", "That reminds me"]
        }
      ],
      building: [
        {
          expression: "That being said",
          meaning: "Despite what was just mentioned",
          example: "The project is challenging. That being said, I think we can complete it on time.",
          alternatives: ["Having said that", "Nevertheless", "Even so"]
        },
        {
          expression: "Along the same lines",
          meaning: "Similarly or in a related way",
          example: "We need better communication. Along the same lines, we should have regular meetings.",
          alternatives: ["Similarly", "In the same vein", "Related to that"]
        },
        {
          expression: "To put it another way",
          meaning: "To express the same idea differently",
          example: "The economy is struggling. To put it another way, people have less money to spend.",
          alternatives: ["In other words", "To rephrase", "To express it differently"]
        },
        {
          expression: "All things considered",
          meaning: "Taking everything into account",
          example: "The trip was expensive and tiring. All things considered, though, it was worth it.",
          alternatives: ["Taking everything into account", "Overall", "On balance"]
        },
        {
          expression: "Moving on to",
          meaning: "Transitioning to the next topic",
          example: "We've covered the budget. Moving on to the timeline, when should we start?",
          alternatives: ["Turning to", "Next, let's discuss", "Now, regarding"]
        }
      ],
      mastery: [
        {
          expression: "Notwithstanding the aforementioned",
          meaning: "Despite what was previously mentioned",
          example: "The challenges are significant. Notwithstanding the aforementioned, I remain optimistic.",
          alternatives: ["Despite the above", "Regardless of what was mentioned", "Even considering the above"]
        },
        {
          expression: "In a parallel vein",
          meaning: "In a similar or related manner",
          example: "Education transforms individuals. In a parallel vein, it transforms society.",
          alternatives: ["Similarly", "In a related manner", "Along similar lines"]
        },
        {
          expression: "To extrapolate from this point",
          meaning: "To extend this idea further",
          example: "Local businesses are struggling. To extrapolate from this point, the entire economy may be affected.",
          alternatives: ["Extending this logic", "Taking this further", "Building on this"]
        }
      ]
    }
  },

  politeness: {
    name: 'Politeness & Social',
    icon: '🙏',
    chunks: {
      foundation: [
        {
          expression: "Excuse me",
          meaning: "Polite way to get attention or apologize for minor interruption",
          example: "Excuse me, could you tell me the time?",
          alternatives: ["Pardon me", "Sorry to bother you", "Sorry to interrupt"]
        },
        {
          expression: "I'm sorry",
          meaning: "Expressing regret or apology",
          example: "I'm sorry I'm late to the meeting.",
          alternatives: ["I apologize", "Sorry", "My apologies"]
        },
        {
          expression: "Thank you so much",
          meaning: "Expressing strong gratitude",
          example: "Thank you so much for helping me with this project.",
          alternatives: ["Thanks a lot", "I really appreciate it", "Many thanks"]
        },
        {
          expression: "You're welcome",
          meaning: "Polite response to thanks",
          example: "A: Thanks for the help! B: You're welcome!",
          alternatives: ["No problem", "Don't mention it", "My pleasure"]
        },
        {
          expression: "Please",
          meaning: "Polite way to make a request",
          example: "Could you please help me with this?",
          alternatives: ["If you would", "If you could", "Would you mind"]
        }
      ],
      building: [
        {
          expression: "I really appreciate it",
          meaning: "Expressing sincere gratitude",
          example: "Thanks for staying late to help. I really appreciate it.",
          alternatives: ["I'm very grateful", "That means a lot", "I'm thankful"]
        },
        {
          expression: "I hope you don't mind",
          meaning: "Polite way to introduce something that might be inconvenient",
          example: "I hope you don't mind, but I need to leave a bit early today.",
          alternatives: ["I hope it's okay", "If it's alright with you", "I hope that's fine"]
        },
        {
          expression: "Would it be possible",
          meaning: "Polite way to make a request",
          example: "Would it be possible to reschedule our meeting?",
          alternatives: ["Could we possibly", "Is there any way", "Might it be possible"]
        },
        {
          expression: "I don't mean to be rude, but",
          meaning: "Polite way to introduce disagreement or criticism",
          example: "I don't mean to be rude, but I think there's an error in your calculation.",
          alternatives: ["I hope this doesn't sound rude, but", "Not to be difficult, but", "I don't want to seem impolite, but"]
        },
        {
          expression: "If you don't mind me asking",
          meaning: "Polite way to introduce a personal question",
          example: "If you don't mind me asking, how long have you worked here?",
          alternatives: ["May I ask", "If it's not too personal", "I hope you don't mind the question"]
        }
      ],
      mastery: [
        {
          expression: "I would be most grateful if",
          meaning: "Very formal and polite way to make a request",
          example: "I would be most grateful if you could review my proposal.",
          alternatives: ["I would greatly appreciate if", "It would be immensely helpful if", "I would be deeply appreciative if"]
        },
        {
          expression: "I trust this won't inconvenience you",
          meaning: "Formal way to express hope that a request won't cause problems",
          example: "I need to change our appointment. I trust this won't inconvenience you.",
          alternatives: ["I hope this doesn't cause any trouble", "I hope this won't be a problem", "I trust this won't cause difficulties"]
        },
        {
          expression: "At your earliest convenience",
          meaning: "When it's convenient for you, but suggesting some urgency",
          example: "Please respond to this email at your earliest convenience.",
          alternatives: ["When convenient for you", "As soon as practical", "When you have a moment"]
        }
      ]
    }
  },

  honesty: {
    name: 'Honesty & Frankness',
    icon: '💯',
    chunks: {
      foundation: [
        {
          expression: "To be honest",
          meaning: "Speaking truthfully or frankly",
          example: "To be honest, I don't really like that restaurant.",
          alternatives: ["Honestly", "Frankly", "To tell the truth"]
        },
        {
          expression: "Actually",
          meaning: "In fact, contrary to expectation",
          example: "I thought the movie would be boring, but actually it was great.",
          alternatives: ["In fact", "Really", "As a matter of fact"]
        },
        {
          expression: "The truth is",
          meaning: "Introducing an honest statement",
          example: "The truth is, I'm not ready for this presentation.",
          alternatives: ["Honestly", "In reality", "The fact is"]
        },
        {
          expression: "I have to admit",
          meaning: "Acknowledging something reluctantly",
          example: "I have to admit, you were right about that investment.",
          alternatives: ["I must admit", "I'll admit", "I confess"]
        },
        {
          expression: "Let's be real",
          meaning: "Let's be honest and practical",
          example: "Let's be real, this project will take longer than expected.",
          alternatives: ["Let's be honest", "Realistically", "Face it"]
        }
      ],
      building: [
        {
          expression: "If I'm being completely honest",
          meaning: "Emphasizing total honesty",
          example: "If I'm being completely honest, I think the plan needs major changes.",
          alternatives: ["To be perfectly honest", "In all honesty", "If I'm being frank"]
        },
        {
          expression: "I'll be straight with you",
          meaning: "I'll tell you the truth directly",
          example: "I'll be straight with you - this isn't working out.",
          alternatives: ["I'll be direct", "I'll be frank", "Let me be honest"]
        },
        {
          expression: "Between you and me",
          meaning: "Sharing something confidentially",
          example: "Between you and me, I think the boss is making a mistake.",
          alternatives: ["Confidentially", "Just between us", "Off the record"]
        },
        {
          expression: "I won't lie",
          meaning: "Emphasizing truthfulness",
          example: "I won't lie, this job is more difficult than I expected.",
          alternatives: ["I won't pretend", "I can't deny", "I'll be honest"]
        },
        {
          expression: "Not gonna lie",
          meaning: "Informal way to emphasize honesty",
          example: "Not gonna lie, that was pretty impressive.",
          alternatives: ["I won't lie", "Honestly", "To be real"]
        }
      ],
      mastery: [
        {
          expression: "In the interest of full disclosure",
          meaning: "Being completely transparent about something",
          example: "In the interest of full disclosure, I should mention I have a conflict of interest.",
          alternatives: ["For complete transparency", "To be fully transparent", "In full disclosure"]
        },
        {
          expression: "I feel compelled to point out",
          meaning: "Feeling obligated to mention something honestly",
          example: "I feel compelled to point out that this strategy has significant risks.",
          alternatives: ["I feel obligated to mention", "I must point out", "I feel duty-bound to say"]
        },
        {
          expression: "Let me be candid",
          meaning: "Allow me to speak very honestly",
          example: "Let me be candid - the company is facing serious challenges.",
          alternatives: ["Let me be frank", "Allow me to be direct", "Speaking candidly"]
        }
      ]
    }
  }
};

// Utility functions for chunk management
export const getRandomChunk = (category = null, level = 'foundation') => {
  const categories = Object.keys(chunkCategories);
  const selectedCategory = category || categories[Math.floor(Math.random() * categories.length)];

  const chunks = chunkCategories[selectedCategory]?.chunks[level] ||
                 chunkCategories.agreement.chunks.foundation;

  const randomChunk = chunks[Math.floor(Math.random() * chunks.length)];

  return {
    ...randomChunk,
    category: selectedCategory,
    level: level,
    categoryName: chunkCategories[selectedCategory]?.name || 'Agreement'
  };
};

// Get chunks by specific category and level
export const getChunksByCategory = (category, level = 'foundation') => {
  return chunkCategories[category]?.chunks[level] || [];
};

// Get all categories
export const getChunkCategories = () => {
  return Object.keys(chunkCategories).map(key => ({
    id: key,
    name: chunkCategories[key].name,
    icon: chunkCategories[key].icon
  }));
};

// Get random chunk avoiding recent ones
export const getRandomChunkWithHistory = (recentChunks = [], category = null, level = 'foundation', maxRetries = 10) => {
  let attempts = 0;
  let chunk;

  do {
    chunk = getRandomChunk(category, level);
    attempts++;
  } while (recentChunks.includes(chunk.expression) && attempts < maxRetries);

  return chunk;
};

// Generate wrong answers for recognition mode
export const generateWrongAnswers = (correctChunk, allChunks) => {
  const wrongAnswers = [];
  const usedAnswers = new Set([correctChunk.meaning]);

  // Add some generic wrong answers
  const genericWrongs = [
    "To disagree completely with someone",
    "To ask for more information",
    "To express strong certainty",
    "To show confusion or lack of understanding",
    "To change the subject completely",
    "To express anger or frustration",
    "To make a formal request",
    "To end a conversation politely",
    "To show surprise or shock",
    "To express doubt about someone's abilities"
  ];

  // Try to get wrong answers from other chunks in same category
  const sameCategory = allChunks.filter(chunk =>
    chunk.category === correctChunk.category &&
    chunk.expression !== correctChunk.expression
  );

  // Add meanings from same category chunks
  sameCategory.slice(0, 2).forEach(chunk => {
    if (!usedAnswers.has(chunk.meaning)) {
      wrongAnswers.push(chunk.meaning);
      usedAnswers.add(chunk.meaning);
    }
  });

  // Fill remaining slots with generic wrong answers
  genericWrongs.forEach(wrong => {
    if (wrongAnswers.length < 3 && !usedAnswers.has(wrong)) {
      wrongAnswers.push(wrong);
      usedAnswers.add(wrong);
    }
  });

  return wrongAnswers.slice(0, 3);
};

// Get all chunks for generating wrong answers
export const getAllChunks = () => {
  const allChunks = [];

  Object.keys(chunkCategories).forEach(categoryKey => {
    const category = chunkCategories[categoryKey];
    Object.keys(category.chunks).forEach(levelKey => {
      const levelChunks = category.chunks[levelKey];
      levelChunks.forEach(chunk => {
        allChunks.push({
          ...chunk,
          category: categoryKey,
          level: levelKey,
          categoryName: category.name
        });
      });
    });
  });

  return allChunks;
};